<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // 网络请求 : aaa -> 自己处理10行
    // 处理: aaa111 -> 自己处理10行
    // 处理： aaa111222 -> 自己处理
    // reject是可选参数
    // 箭头函数只有一个参数时小括号可以省略
    
    // 1.完整写法
    // new Promise(resolve => {
    //   setTimeout(() => {
    //     resolve('aaa')
    //   }, 1000)
    // }).then(res => {
    //   // 1.自己处理10行代码
    //   console.log(res, '第一次处理');
      
    //   // 2.对结果进行第一次处理
    //   return new Promise(resolve => {
    //     resolve(res + '111')
    //   })
    // }).then(res => {
    //   // 3.自己处理10行代码
    //   console.log(res, '第二次处理');
      
    //   // 4.对结果进行第二次处理
    //   return new Promise(resolve => {
    //     resolve(res + '222')
    //   })
    // }).then(res => {
    //   // 5.自己处理
    //   console.log(res, '第三次处理');
      
    //   // 6.对结果进行第三次处理...
    // })  

    // 2.new Promise(resolve =>resolve(结果)) 简写
    // new Promise(resolve => {
    //   setTimeout(() => {
    //     resolve('aaa')
    //   }, 1000)
    // }).then(res => {
    //   // 1.自己处理10行代码
    //   console.log(res, '第一次处理');
      
    //   // 2.对结果进行第一次处理
    //   return Promise.resolve(res + '111')
    // }).then(res => {
    //   // 3.自己处理10行代码
    //   console.log(res, '第二次处理');
      
    //   // 4.对结果进行第二次处理
    //   return Promise.resolve(res + '222')
    // }).then(res => {
    //   // 5.自己处理
    //   console.log(res, '第三次处理');
      
    //   // 6.对结果进行第三次处理...
    // })

    // 3.省略 Promise.resolve
    // new Promise(resolve => {
    //   setTimeout(() => {
    //     resolve('aaa')
    //   }, 1000)
    // }).then(res => {
    //   // 1.自己处理10行代码
    //   console.log(res, '第一次处理');
      
    //   // 2.对结果进行第一次处理
    //   return res + '111'
    // }).then(res => {
    //   // 3.自己处理10行代码
    //   console.log(res, '第二次处理');
      
    //   // 4.对结果进行第二次处理
    //   return res + '222'
    // }).then(res => {
    //   // 5.自己处理
    //   console.log(res, '第三次处理');
      
    //   // 6.对结果进行第三次处理...
    // })    

    // 4.某一层调用失败的情况
    new Promise(resolve => {
      setTimeout(() => {
        resolve('aaa')
      }, 1000)
    }).then(res => {
      // 1.自己处理10行代码
      console.log(res, '第一次处理');
      
      // 2.对结果进行第一次处理
      // return Promise.resolve(res + '111')
      // return Promise.reject('error message')
      throw 'error message'
    }).then(res => {
      // 3.自己处理10行代码
      console.log(res, '第二次处理');
      
      // 4.对结果进行第二次处理
      return Promise.resolve(res + '222')
    }).then(res => {
      // 5.自己处理
      console.log(res, '第三次处理');
      
      // 6.对结果进行第三次处理...
    }).catch(err => {
      console.log(err);
    })   
  </script>
</body>
</html>